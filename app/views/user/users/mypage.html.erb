<% if flash[:mypage_edit_success] %>
  <div class="alert alert-success mt-4 text-center w-25 mx-auto">
    <%= flash[:mypage_edit_success] %>
  </div>
<% end %>

<div class="container">
  <div class="mt-4" style="text-align: right;">
    <%= link_to new_post_path, class: "text-dark" do %>
      <button class="btn btn-dark btn-lg">投稿を作成する <i class="fa-solid fa-pen"></i></button>
    <% end %>
  </div>

  <div class="container">
    <div class="row col-11" style="margin: auto;">
      <div class="col-12 col-md-3 mb-3 mb-md-0">
        <%= image_tag @user.get_profile_image(200, 200), class: "rounded-circle" %>-
      </div>
      <div class="col-12 col-md-8">
        <div style="font-weight: bold; font-size: 50px;">
          <%= @user.name %>
        </div>
        <div style="font-size: 20px;">
          <%= @user.bio %>
        </div>
        <div class="text-end mt-4">
          <%= link_to edit_mypage_path, class: "text-dark" do %>
            <button class="btn btn-outline-dark">プロフィールを編集する <i class="fa-solid fa-pen"></i></button>
          <% end %>
          <span style="margin: 0 6px;">&nbsp;</span>
          <%= link_to chats_path, class: "text-dark" do %>
            <button class="btn btn-outline-dark">チャットする <i class="fa-solid fa-comment-dots"></i></button>
          <% end %>
          <span style="margin: 0 6px;">&nbsp;</span>
          <!--いいねした投稿一覧のurlが作成できてないため暫定的に新規登録画面のurl貼り付けてます-->
          <%= link_to new_post_path, class: "text-dark" do %>
            <button class="btn btn-outline-dark">いいね <i class="fa-solid fa-heart"></i></button>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div style="font-weight: bold; font-size: 25px; margin-top: 40px; margin-bottom: 20px;" class="text-center">
    プロフィール
  </div>

  <table class="table col-10" style="margin: auto;">
    <tbody>
      <tr style="line-height: 2; vertical-align: middle;">
        <td style="font-size: 15px;"><strong>性別</strong></td>
        <td style="font-size: 20px;">
          <%= @user.gender_japanese %>
        </td>
        <td style="font-size: 15px;"><strong>年齢</strong></td>
        <td style="font-size: 20px;">
          <%= @user.age_japanese %>
        </td>
      </tr>
      <tr style="line-height: 2; vertical-align: middle;">
        <td style="font-size: 15px;"><strong>喫煙</strong></td>
        <td style="font-size: 20px;">
          <%= @user.smoking_japanese %>
        </td>
        <td style="font-size: 15px;"><strong>飲酒</strong></td>
        <td style="font-size: 20px;">
          <%= @user.drinking_japanese %>
        </td>
      </tr>
      <tr style="line-height: 2; vertical-align: middle;">
        <td style="font-size: 15px;"><strong>行った国数</strong></td>
        <td style="font-size: 20px;">
          <%= @user.country_count.present? ? @user.country_count : '非公開' %>
        </td>
        <td style="font-size: 15px;"><strong>好きな地域</strong></td>
        <td style="font-size: 20px;">
          <%= @user.favorite_area_japanese %>
        </td>
      </tr>
      <tr style="line-height: 2; vertical-align: middle;">
        <td style="font-size: 15px;"><strong>予算</strong></td>
        <td style="font-size: 20px;">
          <%= @user.budget_japanese %>
        </td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>

  <div style="font-weight: bold; font-size: 25px; margin-top: 40px; margin-bottom: 20px;" class="text-center">
    投稿一覧
  </div>

  <table style="width: 75%; margin: auto; margin-top: 20px;" >
    <tbody>
      <% @posts.each do |post| %>
      <tr>
        <td>
          <%= link_to(post.user) do %>
          <%= image_tag post.user.get_profile_image(50, 50), class: "rounded-circle" %>
          <span style="color: #343a40; font-weight: bold; margin-left: 3px;"><%= post.user.name %></span>
          <% end %>
        </td>
        <td style="font-weight: bold; font-size: 20px">
          <%= link_to post.title, post_path(post.id), style: "color: #343a40;" %>
        </td>
        <td><i class="fa-regular fa-heart mr-2"></i><%= post.likes.count %></td>
        <td><i class="fa-regular fa-comment-dots"></i></td>
      </tr>
      <tr><td colspan="2" style="height: 10px;"></td></tr>
      <% end %>
    </tbody>
  </table>

  <div class="pagination d-flex justify-content-center mt-4 mb-5">
    <%= paginate @posts %>
  </div>
</div>